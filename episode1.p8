pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
function _init()
	player = {
		x = 128/2 -8,
		y = 128 - 16,
		speed = 2,
		frame = 1,
		anim_dt = 0,
		flip_x = false
	}
	anvils = {}
end

function _update()
	-- move player
	if btn(0) then
		player.x = max(0, player.x - player.speed)
		player.flip_x = true
		anim_player()
	elseif btn(1) then
		player.x = min(128-16, player.x + player.speed)
		player.flip_x = false
		anim_player()
	else
		player.frame = 1
	end
	
	-- spawn anvils
	if (#anvils < 5 and rnd(100) < 5) then
		add(anvils, {
			x = rnd(120),
			y = 0
		})
	end
	
	-- move anvils
	for anvil in all(anvils) do
		anvil.y = anvil.y + 2
		if (anvil.y > 128) then
			del(anvils, anvil)
		end
	end
end

function _draw()
	cls(12)
	spr(player.frame, player.x, 
	player.y, 2, 2, player.flip_x)
	for anvil in all(anvils) do
		spr(0, anvil.x, anvil.y,1,1)
	end
end

function anim_player()
	player.anim_dt = player.anim_dt + 1
	if (player.anim_dt % 2 == 0) then
		player.frame = player.frame + 2
		if player.frame == 7 then
			player.frame = 1
		end
	end
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000011110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1111110000000111100000000014ff41000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
15555110000014ff4100000001144ff4100000000001111000000000000000000000000000000000000000000000000000000000000000000000000000000000
111111000001144ff410000001441441100000000014ff4100000000000000000000000000000000000000000000000000000000000000000000000000000000
0111100000014414411000000114f55f1000000001144ff410000000000000000000000000000000000000000000000000000000000000000000000000000000
11551100000114f55f10000001415115100000000144144110000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000141511510000001641551100000000114f55f10000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000164155110000017744554410000000161511510000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000001746455441000017747777741000001774155141000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000017764777774100001446644441000001774755774100000000000000000000000000000000000000000000000000000000000000000000000000000
00000000014466444444100015ff6644451000000144664444100000000000000000000000000000000000000000000000000000000000000000000000000000
0000000015ff665444451000011566555110000015ff664445100000000000000000000000000000000000000000000000000000000000000000000000000000
00000000011166555551000011111111551000001115665551100000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000155111551000015510000110000001551111155100000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
0001000016550145501455013550135501255012550125501155011550105500f5500f5500a5000a5000950008500075000050000500005000050000500005000050000500005000050000500005000050000500
